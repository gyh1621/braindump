+++
title = "LoRaWAN FUOTA"
author = ["John Doe"]
draft = false
+++

Time-stamp: <2020-11-21 01:05:12 gyh"timestamp-wrapper"><span class="timestamp">&lt;2020-07-30 Thu 20:54&gt;</span></span>

FUOTA contains three parts

-   [LoRaWAN Fragmentation]({{< relref "20200725150014-lorawan_fragmentation" >}})
-   [LoRaWAN Multicast]({{< relref "20200625153941-lorawan_multicast" >}})
-   [LoRaWAN Clock Synchronization]({{< relref "20200725150334-lorawan_clock_synchronization" >}})


## What is FUOTA / Why Use FUOTA / FUOTA's Use Cases {#what-is-fuota-why-use-fuota-fuota-s-use-cases}

Firmware Update Over The Air (FUOTA) defines the process of updating a device’s firmware over a wireless medium.

allows to deploy security, optimization, and/or new-functionality patches without much human inter- vention in order to protect devices, extend their lifetime and/or enhance their performance

With FUOTA’s support, security updates, new functionalities, and optimization patches can be deployed with little human intervention to em- bedded devices over their lifetime.

FUOTA is even a more critical requirement because of the long device lifetime that LoRaWAN promises, e.g., 10 years.
This long lifetime stands in contradiction to the fast-changing modern software life-cycle and the LoRaWAN standard, which is sub- ject to continued development.


## Limitations of LoRaWAN to implement FUOTA {#limitations-of-lorawan-to-implement-fuota}

The nature of FUOTA requires downloading a big block of data (e.g. a few hundreds of kilobytes) to the devices. This is a challenging task in LoRaWAN


### Limitations {#limitations}


#### Low data rate {#low-data-rate}

LoRaWAN is low data-rate technology, offering at most a few 10s of kbits/s.


#### Operate in unlicensed band, need to obey duty cycle {#operate-in-unlicensed-band-need-to-obey-duty-cycle}

LoRaWAN also operates in the unlicensed sub-GHz band, where transmissions have to obey a duty cycle restriction
for instance, 1% in Europe, In this case, a device/gateway has to be silent for at least 99 times the last transmission time after each transmission.


#### Designed for predominantly uplink transmissions {#designed-for-predominantly-uplink-transmissions}

LoRaWAN is designed for applications with predominantly uplink transmissions. For instance, a downlink transmission, in case of a class-A de- vice, is only available after an uplink transmission.


### Example {#example}

let us consider how to transmit a firmware image of 50 kBytes using DR2 (SF10/ 125 kHz). Even if the maximum packet size (i.e. 51 bytes for DR2) is used, about 1004 downlink packets are required to transmit the whole firmware. For this, a similar number of uplink transmissions is required to solicit the downlink transmissions. Even with a perfect wireless channel with no losses, the firmware update would take ca. 17 hours to upgrade only one device because of the 1% duty cycle limitation.


## Solution {#solution}

-   A mehanism to send downlinks without uplinks sent first
    optimize  devices' duty cycle and power consumption
-   Multicast support
    optimize gateways' duty cycle
-   Download a big data block with recover mechanism
    without congesting the medium with transmissions to request missing packets


### Multicast {#multicast}


### Fragmentation {#fragmentation}


### Clock Synchronization {#clock-synchronization}

draw a diagram: left is three requirements, right is spec


## FUOTA Process {#fuota-process}

draw a diagram based on "FUOTA Process v1.0.0"


## To Check {#to-check}

-   [ ] duty cycle
